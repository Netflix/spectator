
dependencies {
  testCompile files("$projectDir/src/test/lib/compatibility-0.29.0.jar")
}

javadoc {
  options.memberLevel = org.gradle.external.javadoc.JavadocMemberLevel.PROTECTED
  title "Spectator"
}

task(checkCompatibility, dependsOn: 'jar', type: JavaExec) {
  doFirst {
    main = 'com.googlecode.japi.checker.cli.Main'
    classpath = files("$projectDir/../codequality/japi-checker-cli-0.2.1-SNAPSHOT.jar")
    args = [
      "$projectDir/../codequality/spectator-api-BASELINE.jar",
      jar.archivePath.path
    ]
  }
}

build {
  it.dependsOn checkCompatibility
  it.dependsOn licenseMain
  it.dependsOn licenseTest
}
