<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Netflix Integration - Spectator Docs</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/custom.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Netflix Integration";
    var mkdocs_page_input_path = "intro/netflix.md";
    var mkdocs_page_url = "/intro/netflix/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Spectator Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Getting Started</span></li>

        
            
    <ul class="subnav">
    <li><span>Meter Types</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../counter/">Counters</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../timer/">Timers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../gauge/">Gauges</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dist-summary/">Distribution Summaries</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../conventions/">Naming Conventions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../testing/">Testing</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Netflix Integration</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#netflix-integration">Netflix Integration</a></li>
                
                    <li><a class="toctree-l4" href="#libraries">Libraries</a></li>
                
                    <li><a class="toctree-l4" href="#applications">Applications</a></li>
                
                    <li><a class="toctree-l4" href="#base-server">Base Server</a></li>
                
                    <li><a class="toctree-l4" href="#auto-plugin">Auto Plugin</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../servo-comparison/">Servo Comparison</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Extensions</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ext/jvm-buffer-pools/">Buffer Pools</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ext/jvm-gc/">Garbage Collection</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ext/jvm-gc-causes/">GC Causes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ext/jvm-memory-pools/">Memory Pools</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ext/log4j2/">Log4j2 Appender</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Registries</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../registry/metrics3/">Metrics3</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../registry/servo/">Servo</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../registry/tdigest/">TDigest</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../reports/">Build Reports</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Spectator Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Getting Started &raquo;</li>
        
      
    
    <li>Netflix Integration</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/Netflix/spectator" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="netflix-integration">Netflix Integration<a class="headerlink" href="#netflix-integration" title="Permanent link">&para;</a></h1>
<p>When running at Netflix, use the <code>atlas-client</code> library to enable transferring the
instrumented data to <a href="http://github.com/Netflix/atlas/wiki/">Atlas</a>. See the appropriate
section for the type of project you are working on:</p>
<ul>
<li><a href="#libraries">Libraries</a></li>
<li><a href="#applications">Applications</a>, specifically standalone apps using guice or governator directly.</li>
<li><a href="#base-server">Base Server</a></li>
</ul>
<h2 id="libraries">Libraries<a class="headerlink" href="#libraries" title="Permanent link">&para;</a></h2>
<p>For libraries, the only dependency that should be needed is:</p>
<pre><code>com.netflix.spectator:spectator-api:0.38.0
</code></pre>

<p>The bindings to integrate internally should be included with the application. In your code,
just inject a registry, e.g.:</p>
<pre><code class="java">public class Foo {
  @Inject
  public Foo(Registry registry) {
    ...
  }
  ...
}
</code></pre>

<p>See the <a href="../testing/">testing docs</a> for more information about creating a binding to use with tests.</p>
<h2 id="applications">Applications<a class="headerlink" href="#applications" title="Permanent link">&para;</a></h2>
<p>Application should include a dependency on the <code>atlas-client</code> plugin:</p>
<pre><code>netflix:atlas-client:latest.release
</code></pre>

<p>Note this is an internal only library with configs specific to the Netflix environments. It
is assumed you are using Nebula so that internal maven repositories are available for your
build. When configuring with governator specify the <code>AtlasModule</code>:</p>
<pre><code class="java">Injector injector = LifecycleInjector.builder()
    .withModules(new AtlasModule())
    .build()
    .createInjector();
</code></pre>

<p>The registry binding will then be available so it can be injected as shown in the
<a href="#libraries">libraries section</a>. The insight libraries do not use any governator or guice
specific features. So it is possible to use guice or other dependency injection frameworks
directly with the following caveats:</p>
<ol>
<li>However, some of the libraries do use the
<a href="http://docs.oracle.com/javaee/7/api/javax/annotation/PostConstruct.html">@PostConstruct</a> and
<a href="http://docs.oracle.com/javaee/7/api/javax/annotation/PreDestroy.html">@PreDestroy</a> annotations
for managing lifecycle. Governator adds lifecycle management and many other features on top of
guice and is the recommended way. For more minimalist support of just the lifecycle annotations
on top of guice see <a href="https://github.com/Netflix/iep/tree/master/iep-guice#description">iep-guice</a>.</li>
<li>The bindings and configuration necessary to run correctly with the internal setup are only
supported as guice modules. If trying to use some other dependency injection framework, then
you will be responsible for either finding a way to leverage the guice module in that framework
or recreating those bindings and maintaining them as things change. It is not a paved road path.</li>
</ol>
<h2 id="base-server">Base Server<a class="headerlink" href="#base-server" title="Permanent link">&para;</a></h2>
<p>If using <code>base-server</code>, then you will get the Spectator and Atlas bindings automatically.</p>
<h2 id="auto-plugin">Auto Plugin<a class="headerlink" href="#auto-plugin" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Deprecated</strong>: Use of AutoBindSingleton is generally discouraged. It is recommended to
use one of the other methods.</p>
</div>
<p>If you are only interested in getting the GC logging, there is a library with an auto-bind
singleton that can be used:</p>
<pre><code>com.netflix.spectator:spectator-nflx:0.38.0
</code></pre>

<p>Assuming you are using karyon/base-server or governator with <code>com.netflix</code> in the list of base
packages then the plugin should get automatically loaded.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../servo-comparison/" class="btn btn-neutral float-right" title="Servo Comparison">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../testing/" class="btn btn-neutral" title="Testing"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/Netflix/spectator" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../testing/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../servo-comparison/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
